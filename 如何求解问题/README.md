#### 7-11连锁店商品价格：如何缩小解的空间
* 问题：已知四种商品价格之和，之乘积皆为7.11美元，且商品最小价格不低于0.01美元。求四种商品各自价格
* 求解步骤
1. 确定变量域：初步缩小解的空间
由每件商品最小价格不低于0.01美元，可知每件商品最大价格为7.08美元，为避免处理小数，采用美分为计数单位。从而得到整数集合的变量域
{0.01,0.02,0.03...7.08}
2. 由因子分解入手：大大减小解的空间
由1得：
```
x+y+z+t=711
xyzt=711000000=2^6*3^2*5^6*79
```
则可知其中一件商品的价格能被79整除
3. 分情况讨论：消去不可能解
假设能被79整除的商品价格为x
1) x=79*1
则 y+z+t=632;yzt=2^6*3^2*5^6
2) x=79*2
则 y+z+t=553;yzt=2^5*3^2*5^6
......
由几个价格间的数学关系可得到最终的解
```
x=316
y=125
z=120
t=150
```


#### 第三章主要内容
1. 搜索空间最优解的传统方法分类
2. 介绍穷举搜索
3. 介绍枚举在SAT问题，TSP问题，NLP问题中的应用
4. 介绍局部搜索

#### 搜索空间最优解的传统方法（经典优化算法）
* 仅评估完整解的算法
1. 包括穷举搜索，局部搜索，爬山法，基于梯度的数值优化方法；模拟退火，禁忌搜索，演化算法
2. 在这些算法执行时的任何一次迭代中，都可以打断并获取一个潜在解
*  需要评估部分解算法
1. 部分解：原始问题的不完整解，或简化问题后的完整解
2. 处理部分解的难点
如何创造新的评估函数来评价部分解的质量？
如何将解空间组织成若干个能高效搜索的子空间？（分枝定界）
* 二者的区别
1. 在仅评估完整解的算法中，评估函数只评估完整的一个解。而在评估部分解算法中，评估函数评估的是部分解。
2. 在仅评估完整解的算法中，最优解的产生方式是迭代更新。而在评估部分解算法中，最优解的产生方式是组合子问题的解

#### 穷举搜索
* 定义
> 检查搜索空间中的每一个解直至找到最好的全局解。“穷举”的意义在于，只有找遍搜索空间的每一处，才能确认已经找到最优解
* 缺点
由于搜索空间巨大，搜索耗时。比如TSP问题中，当城市规模达到50时，共需要穷举10^62条不同路径
* 优点
原理简单：系统地产生问题的每一个可能解。然后用评估函数实现最优解的迭代

#### 枚举SAT问题
枚举包含n个变量的SAT问题的搜索空间，步骤如下
1. 确立表达方式
产生长度为n的所有二进制串
2. 确立评估函数
串满足符合布尔表达式，则评估函数值为1；否则为0。一旦评估函数为1，则停止搜索
3. 更新最优解
依次给每个二进制串加上二进制1。每产生一个新串，就对其进行评估，得分最好的串作为当前最优解
4. 采用深度优先搜索来减少搜索空间
原理是将解空间按照变量取真还是假分成两个子空间，最终将整个解空间组织成树状结构。

图P44-3.1

深度优先搜索通过检查给定节点（即子空间）是否包含解，来避免不需要的沿枝搜索。

p45-x1,x2,x3,x4

#### 枚举TSP问题
* 如何设置评估函数：有些城市之间并不相同，其排列为非法，面对非法排列，该如何评估？
对于非法排列，在评估函数中设置高惩罚值。

#### 枚举NLP问题
* 表达方式：区间
用区间单元描述可能解。例如要找函数f(x1,x2)的最大值，且已知x1范围为[-1,3]。可以将x1的取值范围分为400个区间，每个区间单元长度为0.01，x2同理。搜索解空间的过程即穷举搜索单元的过程。一旦选出了具有最好评估价值的单元，就在该单元内继续划分区间。
* “粒度”（区间单元）问题
1. 粒度过大：搜索层次过粗，难以找到最优解
2. 粒度过小：单元数过大。


#### 局部搜索
* 与穷举搜索的不同（改进）
1. 穷举搜索是对整个解空间的每一处进行搜索，而局部搜索只针对某个特定解的局部领域展开搜索。
2. 穷举搜索能找到全局最优解，而局部搜索可能陷于局部最优解
* 步骤
1. 从搜索空间中找到一个解并评估其质量，将它定义为当前解
2. 找新解，若质量好于当前解，则替换；否则抛弃
3. 重复2直至在给定集中找不到更优解
* 极端情况
1. 随机均匀地从搜索空间中选择潜在解，此时局部搜索实质为枚举搜索。且由于随机性，可能重复选取已经试过的点
2. 变换的结果总是返回当前解，使搜索毫无进展
* 正确的方法（折衷）
在当前解的某个局部邻域范围内搜索下一个解。
* 局部搜索的关键：解的变换类型（决定邻域的大小）
1. 邻域过大：搜索效率下降，但不太会陷入局部最优解
2. 邻域过小：能够快速搜索该邻域，但可能陷入局部最优解 

#### SAT问题中的局部搜索（局部搜索效果很好）
* GSAT算法
p49 图3.5
* GSAT算法的主要思想
可满足子句个数：举例，若范式A且B且C满足A为真,B为真，C为假，则称ABC的可满足字句个数为2。显然，对于最优解的范式，其可满足子句个数应该等于该范式的子句个数
1. 从一个随机的真值指派开始，
2.连续反位每个变量的值（真变假，假变真）
3. 评估函数的评估依据是，每次取反后不满足子句个数的减少值。所以当前最优解总是使得不满足子句减少到最大
4. 当新产生的解满足问题时，算法终止，否则重复2、3过程
* “高原”陷阱
在SAT问题的局部搜索算法中,当前解的领域是改变该范式的一个变量的值能到达的所有赋值。那么很可能存在这样一种情况：领域中的每个值都比当前解满足更少的字句，也就是说当前解已经是局部最优解，我们称为“高原”。一些实验表明，当我们在GSAT的高原上进行搜索时，可能无法跳离“局部最优解”
* 改进
1. 为变量取反后的子句额外赋权值，不满足子句的权值较高，多次尝试都未被满足的子句权值尤其高。以此增加跳离“局部最优解”的机会
2. 提出用初始概率的方法对局部搜索算法中变量的初始随机指派进行适当的约束，使在局部搜索的开始阶段，可满足的子句数大大增加，减少了翻转的次数，加快了求解的速度









                    


